<apam xmlns="fr.imag.adele.apam" xmlns:ipojo="org.apache.felix.ipojo"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="fr.imag.adele.apam http://repository-apam.forge.cloudbees.com/release/schema/ApamCore.xsd
                          org.apache.felix.ipojo http://felix.apache.org/ipojo/schemas/CURRENT/core.xsd">

	<composite name="AppsGate-Application"  singleton="true">
		<contentMngt>

			<start implementation="AppsGatePersistency" name="AppsGatePersistencyInst"></start>

 			<start implementation="AppsGateImpl" name="AppsGateInst"></start>

			<start implementation="ConfigurableClockImpl" name="ConfigurableClockInst"></start>

			<start implementation="AppsGateContextProxyImpl" name="AppsGateContextProxyInst"></start>
                        
			<start implementation="AppsGateGoogleServices" name="AppsGateGoogleServicesInst"></start>

			<start implementation="AppsGateHUEServices" name="AppsGateHUEServicesInst"></start>

			<start implementation="AppsGateUPnPMediaServices" name="UPnPMediaAdapter"></start>
			
			<start implementation="AppsGateUbikitServices" name="UbikitAdapter"></start>
			
<!--             <start implementation="AppsGateWattecoServices" name="WattecoAdapter"></start> -->
            
<!--             <start implementation="AppsGateSimulatedServices" name="SimulationAdapter"></start> -->

			<start implementation="YahooWeatherImpl" name="YahooWeather">
				<property name="auto-refresh" value="1800000" />
			</start>

			<!-- inst Fuchsia-FakeDiscovery -->

			<!-- inst ARDSwitchLinker -->
			<!-- inst ARDSwitchImporter -->

			<!-- inst MediaPlayerFactory_Appli-1 -->
			<!-- inst AppsGateContextFollowerImpl_Appli-1 -->


			<!-- inst Global-PropertyHistoryManager -->
			<!-- inst AppsGateContextDeviceNameTableInst -->
			<!-- inst MediaBrowserFactory_Appli-1 -->
			<!-- inst AppsGateRouterImpl_Appli-1 -->

			<!-- <own specification="CoreObjectSpec"></own> -->
			<!-- <own specification="CoreClockSpec"></own> -->
			<!-- <own specification="CoreCalendarSpec"></own> -->
			<!-- <own specification="CoreTemperatureSensorSpec"></own> -->
			<!-- <own specification="CoreColorLightSpec"></own> -->
			<!-- <own specification="CoreWeatherServiceSpec"></own> -->
			<!-- <own specification="CoreOccupancySpec"></own> -->
			<!-- <own specification="CoreMediaBrowserSpec"></own> -->
			<!-- <own specification="CoreCO2SensorSpec"></own> -->
			<!-- <own specification="CoreSmartPlugSpec"></own> -->
			<!-- <own specification="CoreOnOffActuatorSpec"></own> -->
			<!-- <own specification="CoreContactSensorSpec"></own> -->
			<!-- <own specification="CoreKeyCardSensorSpec"></own> -->
			<!-- <own specification="CoreUndefinedSensorSpec"></own> -->
			<!-- <own specification="CoreSwitchSensorSpec"></own> -->

			<!-- <own specification="CoreMediaPlayerSpec"></own> -->
			<!-- <own specification="CoreLuminositySensorSpec"></own> -->
		</contentMngt>

	</composite>

	<composite name="AppsGateUPnPMediaServices" singleton="true">
		<contentMngt>
			<start implementation="AppsgateUPnPAdapter" name="adapter" />
			<start implementation="MediaPlayerFactory" name="Global-MediaPlayerFactory"></start>
			<start implementation="MediaBrowserFactory" name="Global-MediaBrowserFactory"></start>
		</contentMngt>
	</composite>

	<composite name="AppsGateHUEServices" singleton="true">
		<contentMngt>
			<start implementation="PhilipsHUEImplFactory" name="Global-PhilipsHUEFactory" />
			<start implementation="PhilipsHUEAdapterImpl" name="AppsgatePhilipsHUEAdapter" />

		</contentMngt>
	</composite>

	<composite name="AppsGateGoogleServices" singleton="true">
		<contentMngt>
			<start implementation="AppsgateGoogleAdapter" name="AppsgateGoogleAdapterInst"></start>
<!-- 			<start implementation="GoogleCalendarImpl" name="GoogleCalendarInst"></start> -->
<!-- 			<start implementation="GmailImpl" name="GmailInst"></start> -->
		</contentMngt>
	</composite>

	<composite name="AppsGatePersistency" singleton="true">
		<contentMngt>
			<start  implementation="PropertyHistoryManagerMongoImpl" name="Global-PropertyHistoryManager" />
 			<start implementation="ContextHistoryMongoImpl" name="Global-ContextHistoryManager"/>
            <start implementation="ContextManagerImpl" name="Global-ContextManager"/> 			
		</contentMngt>
	</composite>
	
    <composite name="AppsGateUbikitServices" singleton="true">
        <contentMngt>
             <start name="UbikitAdapterInst" implementation="UbikitAdapterImpl"/>
        </contentMngt>
    </composite>
	
    <composite name="AppsGateWattecoServices" singleton="true">
        <contentMngt>
             <start name="WattecoAdapterInst" implementation="WattecoAdapterImpl"/>
        </contentMngt>
    </composite>
        
    <composite name="AppsGateSimulatedServices" singleton="true">
        <contentMngt>
             <start name="SimulatedAdapterInst" implementation="SimulatedAdapterImpl"/>
        </contentMngt>
    </composite>    
        
	<apam-instance name="appsgate" implementation="AppsGate-Application" />

</apam>